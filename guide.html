<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>stalkless (guide) - automated phylogeny generation for ecologists</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Will Pearse">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="assets/css/docs.css" rel="stylesheet">
    <link href="assets/js/google-code-prettify/prettify.css" rel="stylesheet">

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="assets/ico/favicon.ico">
    <link rel="apple-touch-icon" href="assets/ico/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="assets/ico/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="assets/ico/apple-touch-icon-114x114.png">
  </head>

  <body data-spy="scroll" data-target=".subnav" data-offset="50">


	  <!-- Navbar
	    ================================================== -->
	    <div class="navbar navbar-fixed-top">
	      <div class="navbar-inner">
	        <div class="container">
	          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
	            <span class="icon-bar"></span>
	            <span class="icon-bar"></span>
	            <span class="icon-bar"></span>
	          </a>
	          <a class="brand" href="./index.html">stalkless</a>
	          <div class="nav-collapse">
	            <ul class="nav">
	              <li class="">
	                <a href="./index.html">Home</a>
	              </li>
	              <li class="">
	                <a href="./install.html">Install</a>
	              </li>
	              <li class="active">
	                <a href="./guide.html">Guide</a>
	              </li>
	              <li class="">
	                <a href="./faq.html">FAQ</a>
	              </li>
	              <li class="">
	                <a href="http://www.willpearse.com">Who?</a>
	              </li>
	            </ul>
	          </div>
	        </div>
	      </div>
	    </div>

	    <div class="container">

<!-- Masthead
================================================== -->
<header class="jumbotron subhead" id="overview">
  <h1>Guide</h1>
  <p class="lead">How to use stalkless</p>
  <div class="subnav">
    <ul class="nav nav-pills">
	  <li><a href="#overview">Overview</a></li>
	  <li><a href="#method">Method</a></li>
        </ul>
      </li>
    </ul>
  </div>
</header>


<!-- Overview
================================================== -->
<a name="overview"></a>
<section id="overview">
  <div class="page-header">
    <h1>Overview</h1>
  </div>
  <div class="row">
    <div class="span6">
		<p>Once you've got stalkless installed, and you know how to run it (see the 'install' section), give it the arguments <em>-input FOLDER_NAME</em> to show it a folder containing nothing but images to be processed, and <em>-output FOLDER_NAME</em>  to specify where your output should be saved.</p>
    	<p><a href="https://www.dropbox.com/s/6r30ur4f0p5bbbr/demoInput.zip">Try these example files out</a> - on my computer, I type: <em>python stalkless -input /home/will/demoInput -output /home/will/demoOutput</em>. NOTE: all paths are absolute; that means they have to start with a '/' on Mac and Linux computers, and something like 'C:\' on a Windows computer.</p>
		<p>If you get confused, run the program with only the argument <em>--help</em> to get... help.</p>
		<p>All output is in terms of PIXELS. You can convert this to cm, mm, etc., by knowing the resolution at which each image was scanned.</p>
		<p>To run Fourier analyses on your leaf scans, open up the file 'fourier_script.R' that will appear in your output directory once the script has run.</p>
	</div>
    <div class="span6">
		<p>There are some arguments you might want to know about:</p>
		<dl>
			<dt>-noObjects</dt>
			<p>Specify how many objects (leaves) are in each image. Tends to improve image detection.</p>
			<dt>-exactObjects</dt>
			<p>The number of objects in each file on each line (nothing else). Must match the alphabetical order of files given with -input or the order of files in -files or strange errors will occur!</p>
			<dt>-maxObjects</dt>
			<p>At most (there may be fewer), there are this number of objects (leaves) in each image. Tends to improve image detection.</p>
<p></p>

			<dt>-exclusion</dt>
			<p>A comma-separate list (no spaces) of how many pixels to ignore when loading files. In the example, I use this to cut out the information about what the leaves are. This makes it much easier to detect the leaves!</p>
			<dt>-analyseNow</dt>
			<p>Attempt to run the R script the program generates immediately. This will likely crash the program - unless the image segmentation went perfectly, you'll likely have one or two images that are no really leaves. Check you image files, then run the R script.</p>
			<dt>-fill</dt>
			<p>Use a convex hull algorithm to fill in holes within the leaf. This isn't the best way of doing this; this will cause weird alterations to leaf shape in leaves with intricate edges. Check your output!</p>
			<dt>-files</dt>
			<p>Instead of analysing everything in a certain folder, analyse only these files. Each must contain the full, absolute path to that file!</p>

		</dl>
    </div>
    <div class="span4">
		
    </div>
</section>


<!-- Overview
================================================== -->
<a name="method"></a>
<section id="method">
  <div class="page-header">
    <h1>Methods</h1>
  </div>
  <div class="row">
    <div class="span6">
		<ol>
			<li>Load images, make them black and white. Trim off exclusion zones.</li>
			<li>Thresholds the image - sets anything more intense (dark) than the mean intensity of the image + one standard deviation black, makes the rest white.</li>
			<li>There are a number of unconnected regions of black in the image. Count them, and count how many pixels each one is.</li>
			<li>Ignoring the background, select all regions larger than the mean region size + two standard deviations. These are the leaves. Alternatively, pick the largest X regions as the leaves.</li>
			<li>Count the number of pixels in each leaf. Trim off all white-space surrounding the leaves, then save them out.</li>
			<li>Write out an R script, which contains code to for the Fourier analysis of the leaves and counts the edge length of each leaf.</li>
			<li>Done.</li>
	</div>
    <div class="span6">
		<p>Essentially, the whole code assumes you'll have bimodal image data - that the leaves are much larger and brighter than anything else in the image. If you have extremely small, or extremely faint, leaves, this may not be the case.</p>
		<p>There are much better ways of detecting leaves, which involves more complex edge detection that just thresholding, but this seems to work! If you want details on the interior of the leaves, this is something I'm working on, so talk to me.</p>
    </div>
</section>


 <!-- Footer
  ================================================== -->
  <footer class="footer">
    <p class="pull-right"><a href="#">Back to top</a></p>
	<p>&copy <a href="http://www.willpearse.com">Will Pearse</a> (2013), Post-doc in the Cavender-Bares Lab at the University of Minnesota.</p>
    <p>Website (heavily) based on Twitter's Bootstrap - thank you! Bootstrap was built by <a href="http://twitter.com/mdo" target="_blank">@mdo</a> and <a href="http://twitter.com/fat" target="_blank">@fat</a>, their code licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a>.</p>
  </footer>

</div>

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/google-code-prettify/prettify.js"></script>
    <script src="assets/js/bootstrap-transition.js"></script>
    <script src="assets/js/bootstrap-alert.js"></script>
    <script src="assets/js/bootstrap-modal.js"></script>
    <script src="assets/js/bootstrap-dropdown.js"></script>
    <script src="assets/js/bootstrap-scrollspy.js"></script>
    <script src="assets/js/bootstrap-tab.js"></script>
    <script src="assets/js/bootstrap-tooltip.js"></script>
    <script src="assets/js/bootstrap-popover.js"></script>
    <script src="assets/js/bootstrap-button.js"></script>
    <script src="assets/js/bootstrap-collapse.js"></script>
    <script src="assets/js/bootstrap-carousel.js"></script>
    <script src="assets/js/bootstrap-typeahead.js"></script>
    <script src="assets/js/application.js"></script>


  </body>
</html>
